[
  {
    "objectID": "notebooks/data_wrangling.html",
    "href": "notebooks/data_wrangling.html",
    "title": "Data wrangling",
    "section": "",
    "text": "This notebook modifies the wrangling step to work with open data. The paper depends on an .Rdata file (that is not publicly available) that contains a set of 10 separate dataframes per product (i.e. category) – see Table 1 in the paper for a summary stats by product. To work with the open New Zealand data that is similar - I modified the wrangling step.",
    "crumbs": [
      "Data preparation",
      "Data wrangling"
    ]
  },
  {
    "objectID": "notebooks/data_wrangling.html#overview-of-requirements",
    "href": "notebooks/data_wrangling.html#overview-of-requirements",
    "title": "Data wrangling",
    "section": "1. Overview of requirements",
    "text": "1. Overview of requirements\n\nResearch expected input\nThe .Rdata file contains 10 dataframes - each has the following variables:\n\nperiod, Date format e.g. “2021-06-01”\nprice, num format\nvolume, num format\nvalue, num format\nid, Factor format\n\n\n\nData input that is available\nThe csv dataset is a little different:\n\nmonth_num\nchar1 - char11 (11 char variables of various kinds)\nprodid_num\nquantity\nvalue\n\nWe don’t have a price variable but it may be applicable to make it from value/quantity (although this is an assumption). See the fuller dataset exploration for more info.\n\n\nSteps to take\nThe wrangling script qualdecomp_1wrangle.R takes each and computes the following: 1. Calculate expenditure shares per product as a proportion of the total expenditure on all products. 2. Derives the log of price 3. Makes the period a factor for the TPD",
    "crumbs": [
      "Data preparation",
      "Data wrangling"
    ]
  },
  {
    "objectID": "notebooks/data_wrangling.html#replicating-the-process-with-another-dataset",
    "href": "notebooks/data_wrangling.html#replicating-the-process-with-another-dataset",
    "title": "Data wrangling",
    "section": "Replicating the process with another dataset",
    "text": "Replicating the process with another dataset\nThe following steps are then followed in order to replicate the wrangling process with the open NZ data.\n\nStep 1a. Load the raw data\n\n\nShow code\nalldata &lt;- read.csv(\"../data/raw/NZ_dataset_historic_raw.csv\", header = TRUE)\nhead(alldata)\n\n\n\nA data.frame: 6 × 15\n\n\n\nmonth_num\nchar11\nchar1\nchar2\nchar3\nchar4\nchar5\nchar6\nchar7\nchar8\nchar9\nchar10\nprodid_num\nquantity\nvalue\n\n\n\n&lt;chr&gt;\n&lt;chr&gt;\n&lt;dbl&gt;\n&lt;int&gt;\n&lt;chr&gt;\n&lt;chr&gt;\n&lt;chr&gt;\n&lt;chr&gt;\n&lt;chr&gt;\n&lt;chr&gt;\n&lt;chr&gt;\n&lt;chr&gt;\n&lt;int&gt;\n&lt;int&gt;\n&lt;int&gt;\n\n\n\n\n1\n2017-01-01\nbrand_a\n10.6\n16006\nval_w\nval_a\nval_a\nPRG566\nCCC\n150D\nB230\nted\n3\n280\n196420\n\n\n2\n2017-02-01\nbrand_a\n10.6\n16006\nval_w\nval_a\nval_a\nPRG566\nCCC\n150D\nB230\nted\n3\n126\n85312\n\n\n3\n2017-03-01\nbrand_a\n10.6\n16006\nval_w\nval_a\nval_a\nPRG566\nCCC\n150D\nB230\nted\n3\n148\n95920\n\n\n4\n2017-04-01\nbrand_a\n10.6\n16006\nval_w\nval_a\nval_a\nPRG566\nCCC\n150D\nB230\nted\n3\n56\n38552\n\n\n5\n2017-05-01\nbrand_a\n10.6\n16006\nval_w\nval_a\nval_a\nPRG566\nCCC\n150D\nB230\nted\n3\n69\n47397\n\n\n6\n2017-06-01\nbrand_a\n10.6\n16006\nval_w\nval_a\nval_a\nPRG566\nCCC\n150D\nB230\nted\n3\n43\n28303\n\n\n\n\n\n\n\nStep 1b. Format data to be by product\n\n\nShow code\nproduct &lt;- alldata %&gt;%\n    subset(select = c(month_num, prodid_num, quantity, value)) %&gt;%\n    mutate(expenditure = value) %&gt;%\n    mutate(price = value/quantity) %&gt;%\n    subset(select = -c(value)) %&gt;%\n    rename(i = prodid_num, period = month_num)\nhead(product)\n\n\n\nA data.frame: 6 × 5\n\n\n\nperiod\ni\nquantity\nexpenditure\nprice\n\n\n\n&lt;chr&gt;\n&lt;int&gt;\n&lt;int&gt;\n&lt;int&gt;\n&lt;dbl&gt;\n\n\n\n\n1\n2017-01-01\n3\n280\n196420\n701.5000\n\n\n2\n2017-02-01\n3\n126\n85312\n677.0794\n\n\n3\n2017-03-01\n3\n148\n95920\n648.1081\n\n\n4\n2017-04-01\n3\n56\n38552\n688.4286\n\n\n5\n2017-05-01\n3\n69\n47397\n686.9130\n\n\n6\n2017-06-01\n3\n43\n28303\n658.2093\n\n\n\n\n\n\n\nStep 2. Get the expenditure shares, log prices, and factor periods\n\n\nShow code\ntot_exps &lt;- product %&gt;%\n  group_by(period) %&gt;%\n  summarise(tot_exp = sum(expenditure))\n\nproduct_s_l &lt;- merge(product, tot_exps, by = \"period\", all = TRUE) %&gt;%\n  mutate(exp_share = expenditure/tot_exp,\n         logprice = log(price)) %&gt;%\n  subset(select = -c(tot_exp)) \n\nproduct_s_l$period &lt;- as.factor(product_s_l$period)\n\nhead(product_s_l)\n\n\n\nA data.frame: 6 × 7\n\n\n\nperiod\ni\nquantity\nexpenditure\nprice\nexp_share\nlogprice\n\n\n\n&lt;fct&gt;\n&lt;int&gt;\n&lt;int&gt;\n&lt;int&gt;\n&lt;dbl&gt;\n&lt;dbl&gt;\n&lt;dbl&gt;\n\n\n\n\n1\n2017-01-01\n3\n280\n196420\n701.5000\n1.562999e-02\n6.553221\n\n\n2\n2017-01-01\n366\n1\n1009\n1009.0000\n8.029052e-05\n6.916715\n\n\n3\n2017-01-01\n1004\n33\n52688\n1596.6061\n4.192614e-03\n7.375635\n\n\n4\n2017-01-01\n1004\n1\n1221\n1221.0000\n9.716029e-05\n7.107425\n\n\n5\n2017-01-01\n741\n230\n305802\n1329.5739\n2.433400e-02\n7.192614\n\n\n6\n2017-01-01\n943\n99\n85891\n867.5859\n6.834721e-03\n6.765714\n\n\n\n\n\n\n\nSave the processed data\nTo help replicate other aspects of the research - save the processed dataset to /data/processed/.\n\n\nShow code\nwrite.csv(product_s_l, \"../data/processed/product_s_1_raw.csv\", row.names = FALSE)",
    "crumbs": [
      "Data preparation",
      "Data wrangling"
    ]
  },
  {
    "objectID": "notebooks/tpd.html",
    "href": "notebooks/tpd.html",
    "title": "Time Product Dummy",
    "section": "",
    "text": "To replicate the qualdecomp_2runTPD.R script and create a time product dummy on the NZ electronics data.\n\n\n\n Back to top"
  },
  {
    "objectID": "docs/index.html",
    "href": "docs/index.html",
    "title": "Overview",
    "section": "",
    "text": "This site is a way to document the replication of France Krisnich’s article Understanding the quality change implied by multilateral price indexes.\nAs the code is provided as a set of R code and is based on a custom set of data, this repo is to replicate this research with public data.",
    "crumbs": [
      "Overview"
    ]
  },
  {
    "objectID": "docs/index.html#purpose-of-site",
    "href": "docs/index.html#purpose-of-site",
    "title": "Overview",
    "section": "",
    "text": "This site is a way to document the replication of France Krisnich’s article Understanding the quality change implied by multilateral price indexes.\nAs the code is provided as a set of R code and is based on a custom set of data, this repo is to replicate this research with public data.",
    "crumbs": [
      "Overview"
    ]
  },
  {
    "objectID": "notebooks/price-indices.html",
    "href": "notebooks/price-indices.html",
    "title": "Constructing price indices",
    "section": "",
    "text": "Alongside decomposition and analysis/diagnostics - Krsinich evaluates 3 types of price indices:\n\nMatched Model Törnqvist\nGEKS-Törnqvist (or CCDI)\nTime Product Dummy\n\nPrior to decomposing them, lets build these out of the box\n\n\n\n\n\n\nNoteQuick reference of gpindex to do price index measures\n\n\n\n\n\nThe R package gpindex is a pretty powerful package that has a lot of helper functions for price index methods under the hood. This brief summarizes some key indices\n\nJust two periods with play data\nUse some play data built into the package to construct basic indices:\n\nlibrary(gpindex)\n\np1 &lt;- price6$t1\np2 &lt;- price6$t2\nq1 &lt;- quantity6$t1\nq2 &lt;- quantity6$t2\n\nhead(price6)\n\n  t1  t2  t3  t4  t5\n1  1 1.2 1.0 0.8 1.0\n2  1 3.0 1.0 0.5 1.0\n3  1 1.3 1.5 1.6 1.6\n4  1 0.7 0.5 0.3 0.1\n5  1 1.4 1.7 1.9 2.0\n6  1 0.8 0.6 0.4 0.2\n\nhead(quantity6)\n\n   t1  t2  t3  t4   t5\n1 1.0 0.8 1.0 1.2  0.9\n2 1.0 0.9 1.1 1.2  1.2\n3 2.0 1.9 1.8 1.9  2.0\n4 1.0 1.3 3.0 6.0 12.0\n5 4.5 4.7 5.0 5.6  6.5\n6 0.5 0.6 0.8 1.3  2.5\n\n\nJevons index\n\\[\nP_J^{0,t}=\\prod_{i}^N(\\frac{p_i^t}{p_i^0})^\\frac{1}{N}\n\\]\n\n# Calculate some basic out-of-the-box indices (for comparison purposes)\njevons_index(p2, p1)\n\n[1] 1.24192\n\n\nLaspeyres\n\nlaspeyres_index(p2, p1, q1)\n\n[1] 1.42\n\n\nPaasche Index\n\npaasche_index(p2, p1, q2)\n\n[1] 1.382353\n\n\nFisher index\n\nfisher_index(p2, p1, q2, q1)\n\n[1] 1.40105\n\n\nTörnqvist\n\n# Calculate expenditure shares\ns1 &lt;- (p1 * q1) / sum(p1 * q1)\ns2 &lt;- (p2 * q2) / sum(p2 * q2)\n\n# Calculate the Tornqvist weights\nw_torn &lt;- (s1 + s2) / 2\n\n# Calculate price relatives\nr &lt;- p2 / p1\n\n# Calculate the Tornqvist index\ntornqvist_val &lt;- geometric_mean(r, w_torn)\nprint(tornqvist_val)\n\n[1] 1.405162\n\n\n\n\n\n\n\nMatched Model Törnqvist\n\n\nGEKT-T\n\n\nTime Product Dummy\n\n\n\n\n Back to top",
    "crumbs": [
      "Price indices",
      "Constructing price indices"
    ]
  }
]